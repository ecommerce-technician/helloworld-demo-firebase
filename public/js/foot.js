!function(e,o){angular.module("gm.config",[]).value("gm.config",{debug:!0,placess:{autocomplete:{}}}).run(["$window",function(e){if(angular.isUndefined(e.google)||angular.isUndefined(e.google.maps))throw new Error("Google Maps API not available, please make sure the Google Maps library is loaded before the AngularJS Google Maps library is loaded")}]),angular.module("gm.places.directives",[]),angular.module("gm.places",["gm.places.directives"]).run(["$window",function(e){if(angular.isUndefined(e.google)||angular.isUndefined(e.google.maps)||angular.isUndefined(e.google.maps.places)||angular.isUndefined(e.google.maps.places.Autocomplete))throw new Error("Google Maps API not available, please make sure the Google Maps library is loaded before the AngularJS Google Maps library is loaded")}]),angular.module("gm.directives",[]),angular.module("gm.filters",[]),angular.module("gm.services",[]),angular.module("gm",["gm.config","gm.directives","gm.filters","gm.services","gm.places"]),angular.module("gm.services").factory("logger",["$log","$window",function(e,o){var a={};return angular.forEach(["log","info","warn","error"],function(o){a[o]=function(){return e[o](arguments)}}),a.dir=function(a,n){o.console&&(angular.isDefined(n)&&e.info(n+":"),o.console.dir(a))},a}]),angular.module("gm.places").directive("gmPlacesAutocomplete",["$rootScope","gm.config","logger",function(e,o,a){var n=o.places&&o.places.autocomplete||{};return{restrict:"AEC",require:["gmPlacesAutocomplete","?ngModel"],controller:["$scope","$element","$attrs","$transclude",function(e,l,i,r){this._options=angular.extend({},n,e.$eval(i.gmOptions)),this._element=l[0],this._api=void 0,Object.defineProperties(this,{element:{get:function(){return this._element},configurable:!1},api:{get:function(){return this._api},configurable:!1}});try{this._api=new google.maps.places.Autocomplete(this._element,this._options)}catch(t){o.debug&&a.log("Could not instantiate gmPlacesAutocomplete directive: "+t.message)}}],link:function(o,a,n,l){var i=l[0],r=l[1];r&&r.$setViewValue(i.api),google.maps.event.addListener(i.api,"place_changed",function(e,o,a,n,l,i){return function(){l&&l.$setViewValue(n.api),i.$broadcast("gmPlacesAutocomplete::placeChanged",n)}}(o,a,n,i,r,e))}}}])}(window,document);
angular.module("NodeTechApp",["ui.router","ngCookies","ngResource","ngMessages","ngMaterial","firebase","gm"]).config(["$compileProvider",function(e){e.debugInfoEnabled(!1),e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel|app):/)}]).config(["$mdThemingProvider",function(e){e.definePalette("primary",{50:"#bdf9db",100:"#77f2b6",200:"#43ed9b",300:"#14d577",400:"#12b968",500:"#0f9d58",600:"#0c8148",700:"#0a6539",800:"#074929",900:"#042d19",A100:"#ffffff",A200:"#77f2b6",A400:"#12b968",A700:"#0a6539",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100 A200"}),e.definePalette("accent",{50:"#e7eeef",100:"#baced0",200:"#98b7b9",300:"#6e999c",400:"#5f898c",500:"#53777a",600:"#476568",700:"#3a5356",800:"#2e4243",900:"#213031",A100:"#e7eeef",A200:"#baced0",A400:"#5f898c",A700:"#3a5356",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100 A200"}),e.theme("default").primaryPalette("primary",{"default":"400","hue-1":"100","hue-2":"600","hue-3":"A100"}).accentPalette("accent",{"default":"400","hue-1":"100","hue-2":"600","hue-3":"A100"})}]).config(["$mdIconProvider",function(e){e.iconSet("device","img/icons/sets/device-icons.svg",24)}]).run(["$rootScope","$state",function(e,a){"use strict";var t={apiKey:"AIzaSyDt_NewyNcQAy3uJElVgzwc-Z64Z0fa0uA",authDomain:"bundleslang.firebaseapp.com",databaseURL:"https://bundleslang.firebaseio.com",storageBucket:"firebase-bundleslang.appspot.com",messagingSenderId:"260891721713"};firebase.initializeApp(t),e.user={},e.$on("$stateChangeStart",function(t,n,o,i,l){var r=firebase.auth().currentUser;null!=r?(console.log(r.displayName),e.user={loggedIn:!0,email:r.email,name:r.displayName,uid:r.uid}):e.user={loggedIn:!1,email:null,name:null,uid:null};try{n.authenticate&&r.uid?console.log("authenticated"):0==n.authenticate||(console.log("public"),a.go("root.login"),t.preventDefault())}catch(c){a.go("root.login"),t.preventDefault(),console.log("erroneaous")}}),e.$on("$stateChangeSuccess",function(e,a,t,n){}),e.$on("$stateChangeError",function(e,a,t,n,o,i){})}]);
angular.module("NodeTechApp").config(["$stateProvider","$locationProvider","$urlRouterProvider",function(t,e,r){e.html5Mode(!0),r.otherwise("/"),t.state("root",{url:"","abstract":!0,views:{header:{templateUrl:"partials/header.html",controller:"RootController"},footer:{templateUrl:"partials/footer.html",controller:"RootController"}},authenticate:!1}).state("root.home",{url:"/",views:{"container@":{templateUrl:"partials/home.html"}},authenticate:!1}).state("root.login",{url:"/login",views:{"container@":{templateUrl:"partials/login.html",controller:"LoginController"}},authenticate:!1}).state("root.admin",{url:"/admin",views:{"container@":{templateUrl:"partials/login.html",controller:"LoginController"}},authenticate:!1}).state("root.signup",{url:"/signup",views:{"container@":{templateUrl:"partials/login.html",controller:"LoginController"}},authenticate:!1}).state("root.query",{url:"/query",views:{"container@":{templateUrl:"partials/query.html",controller:"QueryController"}},authenticate:!0})}]);
angular.module("NodeTechApp").factory("Auth",["$firebaseAuth",function(o){var e=o();console.log(e)}]);
angular.module("NodeTechApp").controller("LoginController",["$scope","$state","$firebaseAuth",function(e,t,a){var n=a(),s=firebase.database();e.$state=t,e.signIn=function(){n.$signInWithEmailAndPassword(e.email,e.password).then(function(a){e.email="",e.password="",a.uid&&t.go("root.query")})["catch"](function(e){alert("Authentication failed:",e)})},e.address={streetNumber:null,street:null,city:null,state:null,zip:null},e.signUp=function(){n.$createUserWithEmailAndPassword(e.email,e.password).then(function(a){if(e.email="",e.password="",a.uid){var n=s.ref("users/"+a.uid);n.set({first_name:e.first_name,last_name:e.last_name,email:a.email,address:{streetNumber:e.streetNumber,street:e.street,city:e.city,state:e.state,zip:e.zip}}).then(function(){t.go("root.query")})}})["catch"](function(e){alert("Authentication failed:",e)})},e.reset=function(){n.$sendPasswordResetEmail(e.data.email).then(function(){alert("reset sent!")})["catch"](function(e){console.log(e),alert("reset failed:",e)})},e.lat=void 0,e.lng=void 0,e.$on("gmPlacesAutocomplete::placeChanged",function(){console.log(e.autocomplete.getPlace().address_components);for(var t,a=e.autocomplete.getPlace(),n=a.address_components,s=0;t=n[s];s++)"street_number"==t.types[0]&&(e.streetNumber=t.long_name),"route"==t.types[0]&&(e.street=t.long_name),"locality"==t.types[0]&&(e.city=t.long_name),"administrative_area_level_1"==t.types[0]&&(e.state=t.long_name),"postal_code_suffix"==t.types[0]&&(e.zip=t.long_name);e.$apply()})}]);
angular.module("NodeTechApp").controller("QueryController",["$timeout","$scope","$sce","News","Twitter",function(e,t,n,s,r){function l(e){var l=t.bundle.search.match("limit to(.*)strings"),u=t.bundle.search.match("select(.*)contains"),a=t.bundle.search.replace(u[0],"").trim();if(l&&(a=a.replace(l[0],"").trim()),e.includes("news")&&s.getNews(a,d(l)).success(function(e){var s={};for(i=0;i<e.result.docs.length;i++)s={headline:e.result.docs[i].source.enriched.url.title,description:"coming next",date:e.result.docs[i].timestamp},t.bundle.news.push({headline:n.trustAsHtml(s.headline),description:n.trustAsHtml(s.description),date:s.date,sourceIcon:"img/newspaper.png",done:!1})}),e.includes("twitter")&&r.getTweets(a,d(l)).success(function(e){var s={},r=[];for(i=0;i<e.statuses.length;i++)s={headline:e.statuses[i].text,description:"coming next",date:Date.parse(e.statuses[i].created_at)/1e3,profileUrl:e.statuses[i].user.url,profileImg:e.statuses[i].user.profile_image_url,profileName:e.statuses[i].user.name,profileId:e.statuses[i].user.id,tweetId:e.statuses[i].id_str},t.bundle.news.push({headline:n.trustAsHtml(s.headline),description:n.trustAsHtml(s.description),sourceIcon:"img/twitter.png",profileUrl:s.profileUrl,profileImg:s.profileImg,profileName:s.profileName,profileId:s.profileId,tweetId:s.tweetId,date:s.date,twitter:!0,news:!1,done:!1}),r.push(Number(s.date)),i==e.statuses.length-1&&(t.bundle.tweetsPerHour=c(r))}),e.indexOf("FROM reddit")>-1&&e.indexOf("WHERE")>-1){var a=e.replace("SELECT * where keyword contains  ","");r.getTweets(a).success(function(e){var s={};for(i=0;i<e.statuses.length;i++)s={headline:e.statuses[i].text,description:"coming next",date:e.statuses[i].created_at},t.bundle.news.push({headline:n.trustAsHtml(s.headline),description:n.trustAsHtml(s.description),date:s.date,done:!1})})}}t.bundle={},t.query="",t.bundle.search="select * from twitter where keyword contains disney",t.bundle.news=[],t.newsCapped=!1,t.clear=function(){t.bundle.news=[],t.bundle.tweetsPerHour=null},t.submit=function(){t.newsCapped=!1,t.bundle.search&&t.bundle.search.indexOf("select")>-1&&u(t.bundle.search)};var u=function(e){e.indexOf("*")>-1&&a(e)},a=function(e){channelString=e.match("from(.*)where"),channels=channelString[1].replace(/^\s*|\s*$/g,"").split(/\s*,\s*/),l(channels)},c=function(e){var n=1e3*Math.min.apply(null,e),s=1e3*Math.max.apply(null,e),i=Object.keys(t.bundle.news).length/((s-n)/1e3/60/60);return i.toFixed(2)},d=function(e){return e?(limiter=e[1].trim(),limiter>=100?100:limiter):12}}]).factory("News",["$http",function(e){return newsObj={},newsObj.getNews=function(t,n){return e.get("http://bundleslang.node.tech/api/v1/alchemy/search/"+t)},newsObj}]).factory("Twitter",["$http",function(e){return tweetsObj={},tweetsObj.getTweets=function(t,n){return e.get("http://bundleslang.node.tech/api/v1/twitter/search/"+t+"?limit="+n)},tweetsObj}]).filter("numKeys",function(){return function(e){var t=Object.keys(e);return t.length}});
angular.module("NodeTechApp").controller("RootController",["$scope","$state","$firebaseAuth",function(o,t,e){o.$state=t;var n=e();o.signOut=function(){n.$signOut(),t.go("root.home")}}]);